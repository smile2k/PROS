<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:WPFTool.Controls"
                    xmlns:local="clr-namespace:WPFTool.Helpers">
    
    <local:NegativeOffsetConverter x:Key="NegativeOffsetConverter"/>
    
    <!-- Style chính của WpComboBox -->
    <Style TargetType="{x:Type controls:WpComboBox}">
        <Setter Property="IsEditable" Value="True"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="6,2"/>
        <Setter Property="Background" Value="White"/>
        <Setter Property="BorderBrush" Value="Gray"/>
        <Setter Property="Foreground" Value="Black"/>
        <Setter Property="CornerRadius" Value="4" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:WpComboBox}">
                    <Grid>
                        <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}">
                            <Grid>
                                <!--<ContentPresenter Margin="{TemplateBinding Padding}"
                                              HorizontalAlignment="Left"
                                              VerticalAlignment="Center"
                                              Content="{TemplateBinding SelectionBoxItem}" />-->
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />    <!-- TextBox chiếm phần còn lại -->
                                    <ColumnDefinition Width="50" />   <!-- ToggleButton cố định -->
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="PART_EditableTextBox"
                                         Grid.Column="0"
                                         Background="Transparent"
                                         BorderThickness="0"
                                         Margin="{TemplateBinding Padding}"
                                         VerticalAlignment="Center"
                                         HorizontalAlignment="Left"
                                         Text="{Binding Text, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         Focusable="True"
                                         IsReadOnly="{TemplateBinding IsReadOnly}" />

                                <ToggleButton x:Name="ToggleButton"
                                              Grid.Column="1"
                                              Width="24"
                                              Padding="0,0,0,0"
                                              Focusable="False"
                                              IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                              ClickMode="Press"
                                              Background="Transparent"
                                              BorderBrush="{x:Null}"
                                              HorizontalAlignment="Right"
                                              Margin="0,0,0,0">
                                    <Path HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Fill="Black"
                                          Data="M 0 0 L 4 4 L 8 0 Z"/>
                                </ToggleButton>
                            </Grid>
                        </Border>

                        <Popup Name="Popup"
                               Placement="Bottom"
                                                      
                               IsOpen="{TemplateBinding IsDropDownOpen}"
                               AllowsTransparency="True"
                               Focusable="False"
                               PopupAnimation="Slide">
                            <Border Width="{Binding ActualWidth, RelativeSource={RelativeSource TemplatedParent}}" 
                                Background="White"
                                BorderBrush="Gray"
                                BorderThickness="1"
                                CornerRadius="4"
                                SnapsToDevicePixels="True">
                                <ScrollViewer Margin="4"
                                          SnapsToDevicePixels="True">
                                    <StackPanel IsItemsHost="True"
                                            KeyboardNavigation.DirectionalNavigation="Contained" />
                                </ScrollViewer>
                            </Border>
                        </Popup>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Border" Property="Background" Value="#FFE5E5E5"/>
                            <Setter Property="Foreground" Value="#ADADAD"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!--<Style TargetType="{x:Type controls:WpComboBox}">
         --><!--Style riêng cho WpComboBox--><!-- 
        <Setter Property="Background" Value="LightBlue"/>
        <Setter Property="Foreground" Value="Black"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="BorderBrush" Value="SteelBlue"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="6,2"/>
        <Setter Property="CornerRadius" Value="6"/>

        --><!--Có thể override Template ở đây nếu muốn--><!-- 
    </Style>--> 
</ResourceDictionary>